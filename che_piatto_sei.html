<!DOCTYPE html>
<html>
	<head>
		<title>Che piatto pugliese sei?</title>
		<meta charset="UTF-8" />
		<meta name="Che piatto pugliese sei?" />
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1.0" />

		<link
			rel="stylesheet"
			href="static/css/che_piatto_sei.css" />
	</head>
	<body>
		<header>
			<h1 class="title">Qual'è il tuo piatto guida?</h1>
			<h3 class="sottotitolo">
				Scopri con poche semplici domande il tuo piatto guida. 
			</h3>

			<h3 class="sottotitolo">
			    Inizia il test!
		    </h3>
		</header>

		<form action="">
			<div class="question">
				<p id="text"></p>

				<div class="answers">
					<div class="answer">
						<input
							type="radio"
							name="question-1"
							id="answer-1" />
						<label
							id="label-1"
							for="answer-1"></label>
					</div>
					<div class="answer">
						<input
							type="radio"
							name="question-1"
							id="answer-2" />
						<label
							id="label-2"
							for="answer-2"></label>
					</div>
					<div class="answer">
						<input
							type="radio"
							name="question-1"
							id="answer-3" />
						<label
							id="label-3"
							for="answer-3"></label>
					</div>
				</div>
			</div>

			<button id="avanti">Incominciamo</button>
		</form>

		<div class="container">
			<img id="imgPlate" />
			<h6 class="nomePlate"></h6>
			<p class="underTitle"></p>
			<p class="description"></p>
		</div>

		<script type="text/javascript">
			let score = 10;

var piatti = [
	{
		nome: 'Carbnonara',
		foto: 'https://media-assets.lacucinaitaliana.it/photos/642ab803d8bab3cfc524c28c/16:9/w_2560%2Cc_limit/GettyImages-111648900.jpg',
		sottotitolo: 'Sei un buonisssimo piatto di Carbonara',
		descrizione: `Una "Carbonara" è una persona che ha deciso di adottare uno stile di vita sostenibile e rispettoso dell'ambiente. Come il piatto italiano tradizionale, questa persona si impegna a ridurre l'impatto ambientale delle proprie azioni e a promuovere la conservazione delle risorse naturali. 

		    La persona "Carbonara" fa scelte consapevoli per minimizzare l'utilizzo di combustibili fossili e la emissioni di gas serra. Opta per il trasporto pubblico, la bicicletta o l'auto elettrica, piuttosto che per l'auto privata alimentata a benzina o diesel. Inoltre, cerca di ridurre al minimo gli sprechi energetici a casa, scegliendo apparecchiature a basso consumo energetico e utilizzando fonti rinnovabili di energia solare.`,
		   valore: '30',
	},
	{
		nome: 'Pennette alla Vodka',
		foto: 'https://blog.giallozafferano.it/ilchiccodimais/wp-content/uploads/2020/08/pennette-alla-vodka-e-pancetta-ricetta-primo-piatto-anni-ottanta-facile-veloce-e-cremoso-il-chicco-di-mais.jpg',
		sottotitolo: 'Sei un una piato di Penette alla Vodka ',
		descrizione: `Una persona che sceglie di essere una "Penetta alla vodka" è un individuo vivace, socievole e amante dei piaceri della vita. Ispirata dal piatto italiano "Penne alla vodka", questa persona ama gustare le gioie della cucina e si impegna a vivere una vita ricca di esperienze, divertimento e convivialità.

		    La persona "Penetta alla vodka" è conosciuta per essere estroversa e amichevole. Ama circondarsi di amici e familiari e trascorrere del tempo in buona compagnia. È sempre pronta a organizzare cene, feste o riunioni sociali, dove si possono gustare prelibatezze culinarie e brindare al piacere di condividere momenti speciali.`,
		valore: '50',
	},
	{
		nome: 'Spaghetti alla vongole',
		foto: 'https://wallpapers.com/images/hd/spaghetti-alla-vongole-on-gray-bowl-n5cub12orzmh7lza.jpg',
		sottotitolo: 'Sei un magnifico Spaghetto alle vongole',
		descrizione: `Una persona che sceglie di essere uno "Spaghetto alle vongole" è un individuo che apprezza la semplicità, l'autenticità e la bellezza della vita. Ispirata dal famoso piatto italiano, questa persona abbraccia uno stile di vita che si basa sulla purezza, sulla connessione con la natura e sulla ricerca di equilibrio.

		    La persona "Spaghetto alle vongole" ama la natura e trascorre molto tempo all'aperto. Apprezza la bellezza del mare, delle spiagge e della natura in generale. Trova pace e serenità nell'ascolto delle onde, nel contatto con la sabbia e nel profumo del mare. Questa persona è attratta dalla semplicità e dalla purezza della natura, cercando di proteggerla e di viverci in armonia.`,
		valore: '70',
	},
];
var questions = [
	{
		question: 'La mattina sei...',
		answers: [
			{
				answer: 'Perennemente in ritardo',
				value: -10,
			},
			{
				answer: 'Perfettamente in orario',
				value: 0,
			},
			{
				answer: 'Perennemente in anticipo',
				value: 10,
			},
		],
	},
	{
		question: 'Quando mangi, che bibita preferisci?',
		answers: [
			{
				answer: 'Una birra fresca',
				value: -10,
			},
			{
				answer: 'Acqua, rigorosamente Frizzante',
				value: 0,
			},
			{
				answer: 'cocktail',
				value: 10,
			},
		],
	},
	{
		question: 'Se fai uno spuntino, cosa preferisci?',
		answers: [
			{
				answer: 'Fritto',
				value: -10,
			},
			{
				answer: 'Dolce',
				value: 0,
			},
			{
				answer: 'Salato',
				value: 10,
			},
		],
	},
	{
		question: 'Sei più un tipo da...',
		answers: [
			{
				answer: 'Caffè',
				value: -10,
			},
			{
				answer: 'CocaCola',
				value: 0,
			},
			{
				answer: 'Monster',
				value: 10,
			},
		],
	},
	{
		question: 'Che tipo di musica ascolti?',
		answers: [
			{
				answer: 'Trap',
				value: -10,
			},
			{
				answer: 'Rap',
				value: 0,
			},
			{
				answer: 'Pop',
				value: 10,
			},
		],
	},
];

var avanti = document.querySelector('#avanti');

let attuale = 0;
let question = questions[attuale];
showQuestion(question);

function clickClbk(event) {
	console.log('avanti');
	event.preventDefault();
	score = score + parseInt(document.querySelector('input[name="question-1"]:checked').value);
	attuale++;
	question = questions[attuale];
	showQuestion(question);
}

avanti.addEventListener('click', clickClbk);

function showQuestion(question) {
	var answers = question.answers;
	document.querySelector('#text').innerText = question.question;
	for (let i = 0; i < answers.length; i++) {
		const answer = answers[i];
		document.querySelector(`#label-${i + 1}`).innerText = answer.answer;
		//document.querySelector(`label[for="question-${i+1}"]`).setAttribute('value', answer.value);
		document.querySelector(`#answer-${i + 1}`).value = answer.value;
	}
	for (let i = 0; i < document.querySelectorAll(`input[name="question-1"]`).length; i++) {
		document.querySelectorAll(`input[name="question-1"]`)[i].checked = false;
	}
	if (attuale == questions.length - 1) {
		avanti.innerText = 'Vai al risultato';
		avanti.type = 'submit';
		avanti.removeEventListener('click', clickClbk);
	}
}

document.querySelector('form').addEventListener('submit', function (event) {
	console.log('submit');
	event.preventDefault();
	distanza();
});


function distanza() {
	let distanza_1 = Math.abs(parseInt(piatti[0].valore) - score);
	let distanza_2 = Math.abs(parseInt(piatti[1].valore) - score);
	let distanza_3 = Math.abs(parseInt(piatti[2].valore) - score);

	let minimo = Math.min(distanza_1, distanza_2, distanza_3);

	if (minimo === distanza_1) {
		showResult(piatti[0]);
	} else if (minimo === distanza_2) {
		showResult(piatti[1]);
	} else {
		showResult(piatti[2]);
	}
}

function showResult(piatto) {
	document.querySelector('form').style.display = 'none';
	document.querySelector('.nomePlate').innerText = piatto.nome;
	document.querySelector('.underTitle').innerText = piatto.sottotitolo;
	document.querySelector('.description').innerText = piatto.descrizione;
	document.querySelector('#imgPlate').src = piatto.foto;
}
		</script>
	</body>
</html>